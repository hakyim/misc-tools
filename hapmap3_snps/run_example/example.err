Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1 (use --cores to define parallelism)
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	compute_maf
	1	extract_individuals
	1	filter_by_ambiguity
	1	filter_by_maf
	1	gen_lookup_table
	1	get_bim_file
	7

[Fri Jun 11 17:53:42 2021]
rule get_bim_file:
    input: /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.ped, /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.map
    output: output/hapmap3_eur_new_genotype.bim
    jobid: 3
    wildcards: outdir=output, name_tag=hapmap3_eur_new

plink           --ped /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.ped --map /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.map           --make-just-bim           --out output/hapmap3_eur_new_genotype
Warning: 1983 het. haploid genotypes present (see
output/hapmap3_eur_new_genotype.hh ); many commands treat these as missing.
[Fri Jun 11 17:56:29 2021]
Finished job 3.
1 of 7 steps (14%) done

[Fri Jun 11 17:56:29 2021]
rule extract_individuals:
    input: /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/relationships_w_pops_041510.txt
    output: output/hapmap3_eur_new_pop_CEU.individual.txt
    jobid: 6
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU

python extract.py             --input /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/relationships_w_pops_041510.txt             --colname population             --output_cols FID IID             --by CEU             --output output/hapmap3_eur_new_pop_CEU.individual.txt
2021-06-11 05:56:42 PM  Loading table.
2021-06-11 05:56:42 PM  Extracting.
2021-06-11 05:56:42 PM  Extracted 165 instances.
2021-06-11 05:56:42 PM  Output.
2021-06-11 05:56:42 PM  Done.
[Fri Jun 11 17:56:42 2021]
Finished job 6.
2 of 7 steps (29%) done

[Fri Jun 11 17:56:42 2021]
rule compute_maf:
    input: /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.ped, /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.map, output/hapmap3_eur_new_pop_CEU.individual.txt
    output: output/hapmap3_eur_new_pop_CEU.frq
    jobid: 5
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU

plink           --ped /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.ped --map /gpfs/data/im-lab/nas40t2/yanyul/data/hapmap3/hapmap3_r3_b36_fwd.consensus.qc.poly.map           --freq           --keep output/hapmap3_eur_new_pop_CEU.individual.txt           --memory 10000           --out output/hapmap3_eur_new_pop_CEU
Warning: 225 het. haploid genotypes present (see
output/hapmap3_eur_new_pop_CEU.hh ); many commands treat these as missing.
[Fri Jun 11 17:58:44 2021]
Finished job 5.
3 of 7 steps (43%) done

[Fri Jun 11 17:58:44 2021]
rule filter_by_maf:
    input: output/hapmap3_eur_new_pop_CEU.frq
    output: output/hapmap3_eur_new_pop_CEU_maf_0.01.txt
    jobid: 4
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.01

python extract.py             --input output/hapmap3_eur_new_pop_CEU.frq             --colname MAF             --output_cols SNP             --mode maf             --by 0.01             --output output/hapmap3_eur_new_pop_CEU_maf_0.01.txt
2021-06-11 05:58:46 PM  Loading table.
2021-06-11 05:58:47 PM  Extracting.
2021-06-11 05:58:47 PM  Extracted 1227016 instances.
2021-06-11 05:58:47 PM  Output.
2021-06-11 05:58:56 PM  Done.
[Fri Jun 11 17:58:56 2021]
Finished job 4.
4 of 7 steps (57%) done

[Fri Jun 11 17:58:56 2021]
rule filter_by_ambiguity:
    input: output/hapmap3_eur_new_genotype.bim, output/hapmap3_eur_new_pop_CEU_maf_0.01.txt
    output: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.txt
    jobid: 2
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.01

export PYTHONPATH=/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/pyutil:$PYTHONPATH; python filter_out_ambiguious_snps.py             --input output/hapmap3_eur_new_pop_CEU_maf_0.01.txt             --input_bim output/hapmap3_eur_new_genotype.bim             --output output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.txt
[Fri Jun 11 17:59:03 2021]
Finished job 2.
5 of 7 steps (71%) done

[Fri Jun 11 17:59:03 2021]
rule gen_lookup_table:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.txt, output/hapmap3_eur_new_genotype.bim, output/hapmap3_eur_new_pop_CEU.frq
    output: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.build_b36.tsv.gz
    jobid: 1
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.01, target_build=b36

export PYTHONPATH=/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/liftover_snp:/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/pyutil:$PYTHONPATH;         python gen_lookup_table.py             --input output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.txt             --input_bim output/hapmap3_eur_new_genotype.bim             --input_frq output/hapmap3_eur_new_pop_CEU.frq             --target_build b36                          --output output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.build_b36.tsv.gz
2021-06-11 05:59:04 PM  Loading SNP list.
2021-06-11 05:59:05 PM  Loading SNP BIM file.
2021-06-11 05:59:06 PM  Loading SNP FRQ file.
2021-06-11 05:59:09 PM  Intersecting list and MAP.
2021-06-11 05:59:11 PM  There are 1129234 SNPs left.
2021-06-11 05:59:14 PM  Writing to disk.
[Fri Jun 11 17:59:30 2021]
Finished job 1.
6 of 7 steps (86%) done

[Fri Jun 11 17:59:30 2021]
localrule all:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.build_b36.tsv.gz
    jobid: 0

[Fri Jun 11 17:59:30 2021]
Finished job 0.
7 of 7 steps (100%) done
Complete log: /gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/hapmap3_snps/.snakemake/log/2021-06-11T175339.367298.snakemake.log
Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1 (use --cores to define parallelism)
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	filter_by_ambiguity
	1	filter_by_maf
	1	gen_lookup_table
	4

[Fri Jun 11 17:59:32 2021]
rule filter_by_maf:
    input: output/hapmap3_eur_new_pop_CEU.frq
    output: output/hapmap3_eur_new_pop_CEU_maf_0.05.txt
    jobid: 4
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.05

python extract.py             --input output/hapmap3_eur_new_pop_CEU.frq             --colname MAF             --output_cols SNP             --mode maf             --by 0.05             --output output/hapmap3_eur_new_pop_CEU_maf_0.05.txt
2021-06-11 05:59:32 PM  Loading table.
2021-06-11 05:59:34 PM  Extracting.
2021-06-11 05:59:34 PM  Extracted 1113192 instances.
2021-06-11 05:59:34 PM  Output.
2021-06-11 05:59:42 PM  Done.
[Fri Jun 11 17:59:42 2021]
Finished job 4.
1 of 4 steps (25%) done

[Fri Jun 11 17:59:42 2021]
rule filter_by_ambiguity:
    input: output/hapmap3_eur_new_genotype.bim, output/hapmap3_eur_new_pop_CEU_maf_0.05.txt
    output: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.txt
    jobid: 2
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.05

export PYTHONPATH=/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/pyutil:$PYTHONPATH; python filter_out_ambiguious_snps.py             --input output/hapmap3_eur_new_pop_CEU_maf_0.05.txt             --input_bim output/hapmap3_eur_new_genotype.bim             --output output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.txt
[Fri Jun 11 17:59:48 2021]
Finished job 2.
2 of 4 steps (50%) done

[Fri Jun 11 17:59:48 2021]
rule gen_lookup_table:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.txt, output/hapmap3_eur_new_genotype.bim, output/hapmap3_eur_new_pop_CEU.frq
    output: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.build_b36.tsv.gz
    jobid: 1
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.05, target_build=b36

export PYTHONPATH=/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/liftover_snp:/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/pyutil:$PYTHONPATH;         python gen_lookup_table.py             --input output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.txt             --input_bim output/hapmap3_eur_new_genotype.bim             --input_frq output/hapmap3_eur_new_pop_CEU.frq             --target_build b36                          --output output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.build_b36.tsv.gz
2021-06-11 05:59:48 PM  Loading SNP list.
2021-06-11 05:59:48 PM  Loading SNP BIM file.
2021-06-11 05:59:50 PM  Loading SNP FRQ file.
2021-06-11 05:59:53 PM  Intersecting list and MAP.
2021-06-11 05:59:55 PM  There are 1025383 SNPs left.
2021-06-11 05:59:58 PM  Writing to disk.
[Fri Jun 11 18:00:11 2021]
Finished job 1.
3 of 4 steps (75%) done

[Fri Jun 11 18:00:11 2021]
localrule all:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.build_b36.tsv.gz
    jobid: 0

[Fri Jun 11 18:00:11 2021]
Finished job 0.
4 of 4 steps (100%) done
Complete log: /gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/hapmap3_snps/.snakemake/log/2021-06-11T175931.514517.snakemake.log
Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1 (use --cores to define parallelism)
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	gen_lookup_table
	2

[Fri Jun 11 18:00:12 2021]
rule gen_lookup_table:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.txt, output/hapmap3_eur_new_genotype.bim, output/hapmap3_eur_new_pop_CEU.frq
    output: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.build_b37.tsv.gz
    jobid: 1
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.01, target_build=b37

export PYTHONPATH=/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/liftover_snp:/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/pyutil:$PYTHONPATH;         python gen_lookup_table.py             --input output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.txt             --input_bim output/hapmap3_eur_new_genotype.bim             --input_frq output/hapmap3_eur_new_pop_CEU.frq             --target_build b37             --liftover_chain /gpfs/data/im-lab/nas40t2/yanyul/data/hg18ToHg19.over.chain.gz             --output output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.build_b37.tsv.gz
2021-06-11 06:00:13 PM  Loading SNP list.
2021-06-11 06:00:13 PM  Loading SNP BIM file.
2021-06-11 06:00:14 PM  Loading SNP FRQ file.
2021-06-11 06:00:18 PM  Intersecting list and MAP.
2021-06-11 06:00:20 PM  There are 1129234 SNPs left.
2021-06-11 06:00:20 PM  Doing liftover, chain file = /gpfs/data/im-lab/nas40t2/yanyul/data/hg18ToHg19.over.chain.gz
2021-06-11 06:00:27 PM  There are 1108189 SNPs left after liftover.
2021-06-11 06:00:30 PM  Writing to disk.
[Fri Jun 11 18:00:44 2021]
Finished job 1.
1 of 2 steps (50%) done

[Fri Jun 11 18:00:44 2021]
localrule all:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.01.build_b37.tsv.gz
    jobid: 0

[Fri Jun 11 18:00:44 2021]
Finished job 0.
2 of 2 steps (100%) done
Complete log: /gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/hapmap3_snps/.snakemake/log/2021-06-11T180012.221749.snakemake.log
Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1 (use --cores to define parallelism)
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	gen_lookup_table
	2

[Fri Jun 11 18:00:45 2021]
rule gen_lookup_table:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.txt, output/hapmap3_eur_new_genotype.bim, output/hapmap3_eur_new_pop_CEU.frq
    output: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.build_b37.tsv.gz
    jobid: 1
    wildcards: outdir=output, name_tag=hapmap3_eur_new, pop_tag=CEU, maf=0.05, target_build=b37

export PYTHONPATH=/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/liftover_snp:/gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/pyutil:$PYTHONPATH;         python gen_lookup_table.py             --input output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.txt             --input_bim output/hapmap3_eur_new_genotype.bim             --input_frq output/hapmap3_eur_new_pop_CEU.frq             --target_build b37             --liftover_chain /gpfs/data/im-lab/nas40t2/yanyul/data/hg18ToHg19.over.chain.gz             --output output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.build_b37.tsv.gz
2021-06-11 06:00:46 PM  Loading SNP list.
2021-06-11 06:00:46 PM  Loading SNP BIM file.
2021-06-11 06:00:47 PM  Loading SNP FRQ file.
2021-06-11 06:00:51 PM  Intersecting list and MAP.
2021-06-11 06:00:53 PM  There are 1025383 SNPs left.
2021-06-11 06:00:53 PM  Doing liftover, chain file = /gpfs/data/im-lab/nas40t2/yanyul/data/hg18ToHg19.over.chain.gz
2021-06-11 06:00:59 PM  There are 1007190 SNPs left after liftover.
2021-06-11 06:01:02 PM  Writing to disk.
[Fri Jun 11 18:01:15 2021]
Finished job 1.
1 of 2 steps (50%) done

[Fri Jun 11 18:01:15 2021]
localrule all:
    input: output/hapmap3_eur_new.no_ambiguity.pop_CEU_maf_0.05.build_b37.tsv.gz
    jobid: 0

[Fri Jun 11 18:01:15 2021]
Finished job 0.
2 of 2 steps (100%) done
Complete log: /gpfs/data/im-lab/nas40t2/yanyul/GitHub/misc-tools/hapmap3_snps/.snakemake/log/2021-06-11T180045.301523.snakemake.log
